"use strict";function boundingClientRect(n){return n.getBoundingClientRect()}function ignoreDblClick(n){n.addEventListener("dblclick",function(n){n.preventDefault();n.stopPropagation()})}function exAddClass(n,t){n.classList.add(t)}function exRemoveClass(n,t){n.classList.remove(t)}function doClick(n){n.click()}function setFocus(n){n.focus()}function enableById(n){var t=document.getElementById(n);t.disabled=!1}function enableElement(n){n.disabled=!1}function disableById(n){var t=document.getElementById(n);t.disabled=!0}function disableElement(n){n.disabled=!0}function setFocusOnFirstInput(n){for(var r=document.getElementById(n),i=r.getElementsByTagName("input"),t=0;t<i.length;t++){i[t].focus();break}}function youtubeVideo(n,t){mainDiv==null&&createMainDiv(n);videoForm==null?videoForm=createVideoForm("Video",t,800,1,480,306):videoForm.loadVideo(t)}function createGameForm(n,t,i,r,u,f,e){var o={win:createWindow(n,t,r,u,f,e,"wfVideoForm"),iframe:null,defaultSite:"game/index.html",playVideo:null,player:null,id:nextGameFormId++};o.iframe=document.createElement("iframe");o.iframe.id="gameForm"+o.id;o.iframe.className="wfVideoPlayer";o.win.onSizeChange(function(){var n=o.win.contentPanel.clientWidth,t=o.win.contentPanel.clientHeight;o.iframe.width=n;o.iframe.height=t});return o.iframe.src=o.defaultSite,o.iframe.setAttribute("allowfullscreen","true"),o.iframe.setAttribute("scrolling","no"),o.win.contentPanel.appendChild(o.iframe),o}function isMobileOrTablet(){var n,t=!1;return n=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(t=!0),t}function createMapForm(n,t,i,r,u,f){var e={win:createWindow(n,t,i,r,u,f,"wfMapForm"),map:null,id:0,latitude:0,longitude:0,zoom:13,isShowing:!1,SetSource:function(n,t,i){if(e.latitude=n,e.longitude=t,e.zoom=i,e.isShowing){var r=new tt.LngLat(forrm.longitude,e["this"].latitude);e.map.setCenter(r);e.map.setZoom(e.zoom)}else TomTomKey==""?ws.requestTomTomKey(e.ShowMap):e.ShowMap()},FindMe:function(){function n(n){var t=n.coords.latitude,i=n.coords.longitude;e.SetSource(t,i,16);console.log("Map Location Set")}function t(){console.log("unable to find location")}navigator.geolocation&&navigator.geolocation.getCurrentPosition(n,t)},ShowMap:function(){e.map=tt.map({key:TomTomKey,container:e.win.contentPanel.id,zoom:e.zoom,center:[e.longitude,e.latitude],dragPan:!isMobileOrTablet()});var n=e.map,t=new tt.ScaleControl({maxWidth:400,unit:"imperial"});e.isShowing=!0;n.addControl(t);n.dragPan.disable();n.doubleClickZoom.disable();n.boxZoom.disable();n.dragRotate.disable();n.keyboard.disable();n.scrollZoom.disable()}};return e.id=mapFormId++,e.win.contentPanel.id="map"+e.id,e.FindMe(),e}function findParentByClass(n,t){while(n=n.parentElement)if(n.className.includes(t))return n;return n}function containsClass(n,t){return n.className.includes(t)?!0:!1}function log(n){console.log(n)}function createDiv(n,t){var i=document.createElement("div");return t&&(i.className=t),n&&n.appendChild(i),i}function createIcon(n,t){var i=document.createElement("i");return i.className=t,n&&n.appendChild(i),i}function createSpan(n,t,i){var r=document.createElement("span");return r.innerText=t,r.className=i,n&&n.appendChild(r),r}function createImage(n,t,i,r,u){var f=document.createElement("img");return addClass(f,i),addClass(f,imageClass),f.src=t,f.style.width=r+"px",f.style.height=u+"px",f.draggable=!1,n&&n.appendChild(f),f}function addClass(n,t){return t&&n.classList.add(t),n}function removeClass(n,t){n.classList.remove(t)}function hideElement(n){n.classList.add(hiddenClass)}function showElement(n){n.classList.remove(hiddenClass)}function ignoreSelect(n){n.onselectstart=function(){return!1}}function onYouTubeIframeAPIReady(){for(isAPIReady=!0;videoForms.length>0;){var n=videoForms.pop();n.initPlayer()}videoForms=null}function createVideoForm(n,t,i,r,u,f){function c(n){var t=n.data;t==-1?console.log("video unstarted"):t==0?console.log("video ended"):t==1?console.log("video playing"):t==2?console.log("video paused"):t==3?console.log("video buffering"):t==5&&console.log("video qued")}function l(n){n.player=new YT.Player("ytplayer"+n.id,{height:n.win.height,width:n.win.width,videoId:n.videoLink,playerVars:{autoplay:1,controls:0,enablejsapi:1,disablekb:0,fs:1,origin:window.location.host},events:{onReady:n.onPlayerReady,onStateChange:n.onPlayerStateChange,onError:n.onPlayerError}});console.log(n.player)}var h=nextVideoFormId++,e={id:h,win:createWindow(n,"videoForm"+h,i,r,u,f,"wfVideoForm"),videoLink:t,defaultSite:"https://www.youtube.com/embed/",player:null,onPlayerReady:function(n){n.target.playVideo()},onPlayerStateChange:c,onPlayerError:function(n){console.log(n)},initPlayer:function(){l(this)},stopVideo:function(){this.player.stopVideo()},loadVideo:function(n){this.videoLink=n;var t=this.defaultSite+this.videoLink;console.log(t);this.win.close();this.player.cueVideoByUrl(t,0);this.win.open()},playVideo:function(){player.playVideo()}},o,s;return e.win.onClose=function(){e.stopVideo()},e.win.contentPanel.id="ytplayer"+e.id,isAPILoaded||(isAPILoaded=!0,o=document.createElement("script"),o.id="youtubeiframeapi",o.src="https://www.youtube.com/iframe_api",s=document.getElementsByTagName("script")[0],s.parentNode.insertBefore(o,s)),isAPIReady?e.initPlayer():videoForms.push(e),e}function CreateWebSocket(n){function i(n){console.log("Recieved Message: "+n)}var t={uri:n,isOpen:!1,socket:new WebSocket(n),close:null,sendMsg:null,escape:null,requestHtml:null,requestSript:null};return t.socket.binaryType="arraybuffer",t.socket.onopen=function(){t.isOpen=!0;console.log("opened connection to "+t.uri)},t.socket.onclose=function(){t.isOpen=!1;console.log("closed connection from "+t.uri)},t.socket.onmessage=function(n){var t=JSON.parse(n.data);switch(t.Message.Type){case MSGTYPE.Message:i(t.Message.Content);break;case MSGTYPE.TomTomKey:TomTomKey=t.Message.Content;TomTomCallback!=null&&TomTomCallback();TomTomCallback=null;default:console.log("Invalid Message");return}},t.socket.onerror=function(){console.log("Socket Error")},t.close=function(){t.isOpen&&t.socket.close()},t.sendMsg=function(n){if(!t.isOpen)return!1;var i={Type:MSGTYPE.Message.toString(),Content:n},r=JSON.stringify({Message:i});return console.log(i),socket.send(r),!0},t.escape=function(n){return n.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.requestTomTomKey=function(n){if(log("rtt"),TomTomCallback=n,!t.isOpen)return!1;var i={Type:MSGTYPE.TomTomKey.toString(),Content:""},r=JSON.stringify({Message:i});console.log(i);t.socket.send(r)},t}function OpenWebSocket(){ws=CreateWebSocket("wss://"+window.location.host+"/ws");ws.sendMsg("Hello from client!")}function createMainDiv(n){mainDiv=createDiv(n,null);mainDiv.id="wfWindows";firstScriptTag=document.body.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(mainDiv,firstScriptTag);modal=createDiv(mainDiv,"wfModal");document.addEventListener("mousemove",mouseMove);document.addEventListener("mouseup",mouseUp);document.addEventListener("mousedown",mouseDown);document.addEventListener("selectstart",function(){return!1});document.addEventListener("dragstart",function(){return!1});root=document.documentElement}function mouseMove(n){if(dragWindow){document.getSelection().empty();var t=n.clientX-dragOffsetX,i=n.clientY-dragOffsetY;t<0&&(t=0);i<0&&(i=0);dragWindow.style.left=t+"px";dragWindow.style.top=i+"px"}}function mouseUp(){dragWindow&&(dragWindow=null,modal.style.display="none")}function mouseDown(n){var t,i;containsClass(n.target,titleBarBtnClass)||containsClass(n.target,titleBarClass)&&(console.log(n.target),t=findParentByClass(n.target,titleBarClass),t)&&(i=findParentByClass(t,windowClass),i)&&(dragWindow=i,modal.style.display="block",dragOffsetX=n.clientX-dragWindow.offsetLeft,dragOffsetY=n.clientY-dragWindow.offsetTop)}function createVertPanel(n,t){return addClass(createDiv(n,t),vertPanelClass)}function createHorzPanel(n,t){return addClass(createDiv(n,t),horzPanelClass)}function createLabel(n,t,i){return addClass(createSpan(n,t,i),labelClass)}function createFileInput(n,t,i){var r=document.createElement("input");return r.type="file",r.style.display="none",r.id="fileInput",r.accept=i,r.addEventListener("change",t),n.appendChild(r),r}function createFileInputButton(n,t,i){var r=createButton(n,t,function(){i.click()});return n.appendChild(r),r}function createWindow(n,t,i,r,u,f){function v(){o.onclick=l;o.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/max.svg" alt="restoreBtn" style="width: 24px; height: 24px;"/>';e.restore()}function l(){o.onclick=v;o.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/restore.svg" alt="restoreBtn" style="width: 24px; height: 24px;"/>';e.maximize()}var a=arguments.length<=5||arguments[5]===undefined?null:arguments[5],c=new Event("sizechange"),e={div:addClass(createDiv(mainDiv,a),windowClass),restore:function(){e.isMaximized&&(log(e),e.div.style.left=e.saveLeft,e.div.style.top=e.saveTop,e.div.style.height=e.saveHeight,e.div.style.width=e.saveWidth,e.isMaximized=!1,e.div.dispatchEvent(c),log("minimize"))},maximize:function(){e.isMaximized||(e.saveLeft=e.div.style.left,e.saveTop=e.div.style.top,e.saveHeight=e.div.style.height,e.saveWidth=e.div.style.width,e.div.style.left="0px",e.div.style.top="0px",e.div.style.width=document.documentElement.clientWidth+"px",e.div.style.height=document.documentElement.clientHeight+"px",e.div.dispatchEvent(c),e.isMaximized=!0)},close:function(){this.div.style.display="none"},open:function(){console.log("open");this.div.style.display=""},bringToFront:function(){var r=mainDiv.getElementsByClassName(windowClass),u=r.length,f=this.div.style.zIndex,n,t,i;for(this.div.style.zIndex=u+1,n=0;n<u;n++)t=r[n],i=t.style.zIndex,i>f&&(t.style.zIndex=i-1)},contentPanel:null,clientWidth:function(){return e.div.clientWidth},clientHeight:function(){return e.div.clientHeight},title:null,setTitle:function(n){e.title.innerText=n},onSizeChange:function(n){e.div.addEventListener("sizechange",n);n()},isMaximized:!1,saveLeft:"",saveTop:"",saveWidth:"",saveHeight:"",onClose:function(){}},s,o,h;return e.div.id=t,e.div.style.left=i+"px",e.div.style.top=r+"px",e.div.style.width=u+"px",e.div.style.height=f+"px",window.addEventListener("resize",function(){e.isMaximized&&e.maximize();e.div.dispatchEvent(c)}),e.div.onmouseover=function(){e.bringToFront()},s=createHorzPanel(e.div,titleBarClass),createImage(s,"/favicon.png",titleBarIconClass,36,36),e.title=createLabel(s,n,titleBarTitleClass),o=createSpan(s,"",titleBarBtnClass),o.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/max.svg" alt="maxBtn" style="width: 24px; height: 24px;"/>',o.onclick=l,ignoreSelect(o),h=createSpan(s,"",titleBarBtnClass),h.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/close.svg" alt="maxBtn" style="width: 24px; height: 24px;"/>',h.onclick=function(){e.onClose();e.close()},ignoreSelect(h),e.contentPanel=createVertPanel(e.div,windowContentClass),e}function createButton(n,t,i){var u=arguments.length<=3||arguments[3]===undefined?null:arguments[3],r=addClass(createDiv(null,u),buttonClass);return r.onselectstart=function(){return!1},r.innerText=t,r.onclick=i,n&&n.appendChild(r),r}function createDefaultButton(n,t,i,r){return createButton(n,t,i,r+" "+defaultButtonClass)}function createCancelButton(n,t,i,r){return createButton(n,t,i,r+" "+cancelButtonClass)}var nextGameFormId=1,mapFormId,ws,mainDiv,firstScriptTag,root,modal,videoForm,dragWindow,dragOffsetX,dragOffsetY;window.isMobileOrTablet=window.isMobileOrTablet||isMobileOrTablet;mapFormId=1;var windowClass="wfWindow",titleBarClass="wfTitleBar",titleBarTitleClass="wfTitleBarTitle",titleBarIconClass="wfTitleBarIcon",titleBarBtnClass="wfTitleBarBtn",windowContentClass="wfWindowContent",vertPanelClass="wfVertPanel",horzPanelClass="wfHorzPanel",labelClass="wfLabel",buttonClass="wfButton",defaultButtonClass="wfDefaultButton",cancelButtonClass="wfCancelButton",hiddenClass="wfHidden",imageClass="wfImage",previewImageBGC="#c5d46b";var videoForms=[],isAPILoaded=!1,isAPIReady=!1,nextVideoFormId=1;var MSGTYPE={Message:0,TomTomKey:1},TomTomKey="",TomTomCallback=null;