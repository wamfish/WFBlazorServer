"use strict";function boundingClientRect(e){return e.getBoundingClientRect()}function ignoreDblClick(e){e.addEventListener("dblclick",function(e){e.preventDefault(),e.stopPropagation()})}function exAddClass(e,t){e.classList.add(t)}function exRemoveClass(e,t){e.classList.remove(t)}function doClick(e){e.click()}function setFocus(e){e.focus()}function setFocusOnFirstInput(e){for(var t=document.getElementById(e),n=t.getElementsByTagName("input"),i=0;i<n.length;i++){n[i].focus();break}}function youtubeVideo(e,t){null==mainDiv&&createMainDiv(e),null==videoForm?videoForm=createVideoForm("Video",t,800,1,480,306):videoForm.loadVideo(t)}function createGameForm(e,t,n,i,o,a,l){var s={win:createWindow(e,t,i,o,a,l,"wfVideoForm"),iframe:null,defaultSite:"game/index.html",playVideo:null,player:null,id:nextGameFormId++};return s.iframe=document.createElement("iframe"),s.iframe.id="gameForm"+s.id,s.iframe.className="wfVideoPlayer",s.win.onSizeChange(function(){var e=s.win.contentPanel.clientWidth,t=s.win.contentPanel.clientHeight;s.iframe.width=e,s.iframe.height=t}),s.iframe.src=s.defaultSite,s.iframe.setAttribute("allowfullscreen","true"),s.iframe.setAttribute("scrolling","no"),s.win.contentPanel.appendChild(s.iframe),s}function isMobileOrTablet(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function createMapForm(e,t,n,i,o,a){var l={win:createWindow(e,t,n,i,o,a,"wfMapForm"),map:null,id:0,latitude:0,longitude:0,zoom:13,isShowing:!1,SetSource:function(e,t,n){if(l.latitude=e,l.longitude=t,l.zoom=n,l.isShowing){var i=new tt.LngLat(forrm.longitude,l.this.latitude);l.map.setCenter(i),l.map.setZoom(l.zoom)}else""==TomTomKey?ws.requestTomTomKey(l.ShowMap):l.ShowMap()},FindMe:function(){function e(e){var t=e.coords.latitude,n=e.coords.longitude;l.SetSource(t,n,16),console.log("Map Location Set")}function t(){console.log("unable to find location")}navigator.geolocation&&navigator.geolocation.getCurrentPosition(e,t)},ShowMap:function(){l.map=tt.map({key:TomTomKey,container:l.win.contentPanel.id,zoom:l.zoom,center:[l.longitude,l.latitude],dragPan:!isMobileOrTablet()});var e=l.map,t=new tt.ScaleControl({maxWidth:400,unit:"imperial"});l.isShowing=!0,e.addControl(t),e.dragPan.disable(),e.doubleClickZoom.disable(),e.boxZoom.disable(),e.dragRotate.disable(),e.keyboard.disable(),e.scrollZoom.disable()}};return l.id=mapFormId++,l.win.contentPanel.id="map"+l.id,l.FindMe(),l}function findParentByClass(e,t){for(;e=e.parentElement;)if(e.className.includes(t))return e;return e}function containsClass(e,t){return!!e.className.includes(t)}function log(e){console.log(e)}function createDiv(e,t){var n=document.createElement("div");return t&&(n.className=t),e&&e.appendChild(n),n}function createIcon(e,t){var n=document.createElement("i");return n.className=t,e&&e.appendChild(n),n}function createSpan(e,t,n){var i=document.createElement("span");return i.innerText=t,i.className=n,e&&e.appendChild(i),i}function createImage(e,t,n,i,o){var a=document.createElement("img");return addClass(a,n),addClass(a,imageClass),a.src=t,a.style.width=i+"px",a.style.height=o+"px",a.draggable=!1,e&&e.appendChild(a),a}function addClass(e,t){return t&&e.classList.add(t),e}function removeClass(e,t){e.classList.remove(t)}function hideElement(e){e.classList.add(hiddenClass)}function showElement(e){e.classList.remove(hiddenClass)}function ignoreSelect(e){e.onselectstart=function(){return!1}}function onYouTubeIframeAPIReady(){for(isAPIReady=!0;videoForms.length>0;){var e=videoForms.pop();e.initPlayer()}videoForms=null}function createVideoForm(e,t,n,i,o,a){function l(e){var t=e.data;-1==t?console.log("video unstarted"):0==t?console.log("video ended"):1==t?console.log("video playing"):2==t?console.log("video paused"):3==t?console.log("video buffering"):5==t&&console.log("video qued")}function s(e){e.player=new YT.Player("ytplayer"+e.id,{height:e.win.height,width:e.win.width,videoId:e.videoLink,playerVars:{autoplay:1,controls:0,enablejsapi:1,disablekb:0,fs:1,origin:window.location.host},events:{onReady:e.onPlayerReady,onStateChange:e.onPlayerStateChange,onError:e.onPlayerError}}),console.log(e.player)}var r=nextVideoFormId++,c={id:r,win:createWindow(e,"videoForm"+r,n,i,o,a,"wfVideoForm"),videoLink:t,defaultSite:"https://www.youtube.com/embed/",player:null,onPlayerReady:function(e){e.target.playVideo()},onPlayerStateChange:l,onPlayerError:function(e){console.log(e)},initPlayer:function(){s(this)},stopVideo:function(){this.player.stopVideo()},loadVideo:function(e){this.videoLink=e;var t=this.defaultSite+this.videoLink;console.log(t),this.win.close(),this.player.cueVideoByUrl(t,0),this.win.open()},playVideo:function(){player.playVideo()}};if(c.win.onClose=function(){c.stopVideo()},c.win.contentPanel.id="ytplayer"+c.id,!isAPILoaded){isAPILoaded=!0;var d=document.createElement("script");d.id="youtubeiframeapi",d.src="https://www.youtube.com/iframe_api";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(d,u)}return isAPIReady?c.initPlayer():videoForms.push(c),c}function CreateWebSocket(e){function t(e){console.log("Recieved Message: "+e)}var n={uri:e,isOpen:!1,socket:new WebSocket(e),close:null,sendMsg:null,escape:null,requestHtml:null,requestSript:null};return n.socket.binaryType="arraybuffer",n.socket.onopen=function(e){n.isOpen=!0,console.log("opened connection to "+n.uri)},n.socket.onclose=function(e){n.isOpen=!1,console.log("closed connection from "+n.uri)},n.socket.onmessage=function(e){var n=JSON.parse(e.data);switch(n.Message.Type){case MSGTYPE.Message:t(n.Message.Content);break;case MSGTYPE.TomTomKey:TomTomKey=n.Message.Content,null!=TomTomCallback&&TomTomCallback(),TomTomCallback=null;default:return void console.log("Invalid Message")}},n.socket.onerror=function(e){console.log("Socket Error")},n.close=function(){n.isOpen&&n.socket.close()},n.sendMsg=function(e){if(!n.isOpen)return!1;var t={Type:MSGTYPE.Message.toString(),Content:e},i=JSON.stringify({Message:t});return console.log(t),socket.send(i),!0},n.escape=function(e){return e.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n.requestTomTomKey=function(e){if(log("rtt"),TomTomCallback=e,!n.isOpen)return!1;var t={Type:MSGTYPE.TomTomKey.toString(),Content:""},i=JSON.stringify({Message:t});console.log(t),n.socket.send(i)},n}function OpenWebSocket(){ws=CreateWebSocket("wss://"+window.location.host+"/ws"),ws.sendMsg("Hello from client!")}function createMainDiv(e){mainDiv=createDiv(e,null),mainDiv.id="wfWindows",firstScriptTag=document.body.getElementsByTagName("script")[0],firstScriptTag.parentNode.insertBefore(mainDiv,firstScriptTag),modal=createDiv(mainDiv,"wfModal"),document.addEventListener("mousemove",mouseMove),document.addEventListener("mouseup",mouseUp),document.addEventListener("mousedown",mouseDown),document.addEventListener("selectstart",function(e){return!1}),document.addEventListener("dragstart",function(e){return!1}),root=document.documentElement}function mouseMove(e){if(dragWindow){document.getSelection().empty();var t=e.clientX-dragOffsetX,n=e.clientY-dragOffsetY;t<0&&(t=0),n<0&&(n=0),dragWindow.style.left=t+"px",dragWindow.style.top=n+"px"}}function mouseUp(e){dragWindow&&(dragWindow=null,modal.style.display="none")}function mouseDown(e){if(!containsClass(e.target,titleBarBtnClass)&&containsClass(e.target,titleBarClass)){console.log(e.target);var t=findParentByClass(e.target,titleBarClass);if(t){var n=findParentByClass(t,windowClass);n&&(dragWindow=n,modal.style.display="block",dragOffsetX=e.clientX-dragWindow.offsetLeft,dragOffsetY=e.clientY-dragWindow.offsetTop)}}}function createVertPanel(e,t){return addClass(createDiv(e,t),vertPanelClass)}function createHorzPanel(e,t){return addClass(createDiv(e,t),horzPanelClass)}function createLabel(e,t,n){return addClass(createSpan(e,t,n),labelClass)}function createFileInput(e,t,n){var i=document.createElement("input");return i.type="file",i.style.display="none",i.id="fileInput",i.accept=n,i.addEventListener("change",t),e.appendChild(i),i}function createFileInputButton(e,t,n){var i=createButton(e,t,function(){n.click()});return e.appendChild(i),i}function createWindow(e,t,n,i,o,a){function l(){m.onclick=s,m.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/max.svg" alt="restoreBtn" style="width: 24px; height: 24px;"/>',d.restore()}function s(){m.onclick=l,m.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/restore.svg" alt="restoreBtn" style="width: 24px; height: 24px;"/>',d.maximize()}var r=arguments.length<=5||void 0===arguments[5]?null:arguments[5],c=new Event("sizechange"),d={div:addClass(createDiv(mainDiv,r),windowClass),restore:function(){d.isMaximized&&(log(d),d.div.style.left=d.saveLeft,d.div.style.top=d.saveTop,d.div.style.height=d.saveHeight,d.div.style.width=d.saveWidth,d.isMaximized=!1,d.div.dispatchEvent(c),log("minimize"))},maximize:function(){d.isMaximized||(d.saveLeft=d.div.style.left,d.saveTop=d.div.style.top,d.saveHeight=d.div.style.height,d.saveWidth=d.div.style.width,d.div.style.left="0px",d.div.style.top="0px",d.div.style.width=document.documentElement.clientWidth+"px",d.div.style.height=document.documentElement.clientHeight+"px",d.div.dispatchEvent(c),d.isMaximized=!0)},close:function(){this.div.style.display="none"},open:function(){console.log("open"),this.div.style.display=""},bringToFront:function(){var e=mainDiv.getElementsByClassName(windowClass),t=e.length,n=this.div.style.zIndex;this.div.style.zIndex=t+1;for(var i=0;i<t;i++){var o=e[i],a=o.style.zIndex;a>n&&(o.style.zIndex=a-1)}},contentPanel:null,clientWidth:function(){return d.div.clientWidth},clientHeight:function(){return d.div.clientHeight},title:null,setTitle:function(e){d.title.innerText=e},onSizeChange:function(e){d.div.addEventListener("sizechange",e),e()},isMaximized:!1,saveLeft:"",saveTop:"",saveWidth:"",saveHeight:"",onClose:function(){}};d.div.id=t,d.div.style.left=n+"px",d.div.style.top=i+"px",d.div.style.width=o+"px",d.div.style.height=a+"px",window.addEventListener("resize",function(){d.isMaximized&&d.maximize(),d.div.dispatchEvent(c)}),d.div.onmouseover=function(){d.bringToFront()};var u=createHorzPanel(d.div,titleBarClass);createImage(u,"/favicon.png",titleBarIconClass,36,36),d.title=createLabel(u,e,titleBarTitleClass);var m=createSpan(u,"",titleBarBtnClass);m.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/max.svg" alt="maxBtn" style="width: 24px; height: 24px;"/>',m.onclick=s,ignoreSelect(m);var f=createSpan(u,"",titleBarBtnClass);return f.innerHTML='<img class="wfSvgIcon" src="./_content/WFBlazorLib/icons/close.svg" alt="maxBtn" style="width: 24px; height: 24px;"/>',f.onclick=function(){d.onClose(),d.close()},ignoreSelect(f),d.contentPanel=createVertPanel(d.div,windowContentClass),d}function createButton(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?null:arguments[3],o=addClass(createDiv(null,i),buttonClass);return o.onselectstart=function(){return!1},o.innerText=t,o.onclick=n,e&&e.appendChild(o),o}function createDefaultButton(e,t,n,i){var o=createButton(e,t,n,i+" "+defaultButtonClass);return o}function createCancelButton(e,t,n,i){var o=createButton(e,t,n,i+" "+cancelButtonClass);return o}var nextGameFormId=1;window.isMobileOrTablet=window.isMobileOrTablet||isMobileOrTablet;var ws,mainDiv,firstScriptTag,root,modal,videoForm,dragWindow,dragOffsetX,dragOffsetY,mapFormId=1,windowClass="wfWindow",titleBarClass="wfTitleBar",titleBarTitleClass="wfTitleBarTitle",titleBarIconClass="wfTitleBarIcon",titleBarBtnClass="wfTitleBarBtn",windowContentClass="wfWindowContent",vertPanelClass="wfVertPanel",horzPanelClass="wfHorzPanel",labelClass="wfLabel",buttonClass="wfButton",defaultButtonClass="wfDefaultButton",cancelButtonClass="wfCancelButton",hiddenClass="wfHidden",imageClass="wfImage",previewImageBGC="#c5d46b",videoForms=[],isAPILoaded=!1,isAPIReady=!1,nextVideoFormId=1,MSGTYPE={Message:0,TomTomKey:1},TomTomKey="",TomTomCallback=null;